<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Environment Setup Once you have logged into the AWS Management Console, you’ll need to do the following:
 Configure AWS Deploy a Jumpbox in EC2 Install the BOSH CLI  Configure AWS Now we need to configure the AWS environment. Go to the BOSH AWS Configuration page for instructions.
Note You will need to modify the region from us-east-1 to your GovCloud region! I also recommend everyone create their own VPC if possible.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="" />
<meta property="og:description" content="Environment Setup Once you have logged into the AWS Management Console, you’ll need to do the following:
 Configure AWS Deploy a Jumpbox in EC2 Install the BOSH CLI  Configure AWS Now we need to configure the AWS environment. Go to the BOSH AWS Configuration page for instructions.
Note You will need to modify the region from us-east-1 to your GovCloud region! I also recommend everyone create their own VPC if possible." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/1_environment-setup/" />
<meta property="article:modified_time" content="2020-04-29T12:03:49-06:00" />
<title>1 Environment Setup | Bosh Workshop</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.6df681b0bb21155cba49f6078e3559216772d8e03e780d240c73ea21817ed5e5.css" integrity="sha256-bfaBsLshFVy6SfYHjjVZIWdy2OA&#43;eA0kDHPqIYF&#43;1eU=">
<script defer src="/en.search.min.ee8c75931a2550fb6adce6c56f8695abc17a5533d92ba4dc055732ced6f2a0c0.js" integrity="sha256-7ox1kxolUPtq3ObFb4aVq8F6VTPZK6TcBVcyztbyoMA="></script>

<script defer src="/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js" integrity="sha256-dKi7B/C&#43;6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>Bosh Workshop</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/1_environment-setup/" class="active">1 Environment Setup</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/2_deploy-director/" class="">2 Deploy Director</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/3_cloud-config/" class="">3 Cloud Config</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/4_bosh-releases/" class="">4 Bosh Releases</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/5_stemcells/" class="">5 Stemcells</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/6_bosh-deployments/" class="">6 Bosh Deployments</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/7_cleanup/" class="">7 Cleanup</a>
  

        </li>
      
    
  </ul>
  















</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>1 Environment Setup</strong>

  <label for="toc-control">
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#environment-setup">Environment Setup</a>
      <ul>
        <li><a href="#configure-aws">Configure AWS</a></li>
        <li><a href="#deploy-jumpbox">Deploy Jumpbox</a></li>
        <li><a href="#jumpbox-config">Jumpbox Config</a></li>
        <li><a href="#install-bosh-cli">Install BOSH CLI</a></li>
      </ul>
    </li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="environment-setup">Environment Setup</h1>
<p>Once you have logged into the AWS Management Console, you’ll need to do the following:</p>
<ol>
<li>Configure AWS</li>
<li>Deploy a Jumpbox in EC2</li>
<li>Install the BOSH CLI</li>
</ol>
<h2 id="configure-aws">Configure AWS</h2>
<p>Now we need to configure the AWS environment. Go to the BOSH AWS Configuration page for instructions.</p>
<blockquote class="book-hint info">
  <strong>Note</strong>
You will need to modify the region from us-east-1 to your GovCloud region! I also recommend everyone create their own VPC if possible. If not then we’ll need to keep track of subnets/ranges.
</blockquote>

<h2 id="deploy-jumpbox">Deploy Jumpbox</h2>
<p>Now we’ll need a Jumpbox up in AWS to perform the commands. (You can run it locally but for the sake of simplicity we’ll run everything in the cloud.)</p>
<ul>
<li>Go to EC2</li>
<li>Click on Instances</li>
<li>Click on Launch Instance</li>
</ul>
<p>You’ll have a number of options to choose from. (More than likely.)</p>
<p>
  <img src="/docs/img/create-instance.png" alt="Create Instance" /></p>
<p>Click on Select on the “Amazon Linux 2 AMI” row.</p>
<p>
  <img src="/docs/img/choose-instance-type.png" alt="Choose Instance Type" /></p>
<p>Now I recommend choosing a VM size of M5.Large or M5.XLarge. The extra cores and memory will help with compiling times.</p>
<p>Once you have it selected choose <strong>Next</strong>.</p>
<ul>
<li>Make sure you select your BOSH VPC and choose your subnet.</li>
<li>You only need one instance so keep it at the default</li>
<li>Change Auto Assign Public IP to <strong>Enable</strong>

  <img src="/docs/img/configure_instance_1.png" alt="Configure" /></li>
<li>Scroll to the bottom to Network Interfaces. In the Primary IP field enter: 10.0.0.5

  <img src="/docs/img/configure_instance_2.png" alt="Configure" /></li>
</ul>
<p>Click <strong>Next</strong></p>
<p>Change the storage size from 8 GB to something more reasonable. I recommend 32 GB.</p>
<p>
  <img src="/docs/img/storage.png" alt="Storage" /></p>
<p>Click <strong>Next</strong></p>
<p>No need to add tags at this time. It’s up to you!</p>
<p>Click <strong>Next</strong></p>
<p>Choose Select an existing security group and choose your BOSH security group! 
  <img src="/docs/img/security-group.png" alt="Security" /></p>
<p>Click <strong>Review and Launch</strong></p>
<p>Review the details then <strong>Launch</strong></p>
<p>You will need to choose a key pair. Make sure you select your BOSH keypair.</p>
<p>
  <img src="/docs/img/keypair.png" alt="Key Pair" /></p>
<p>Click <strong>Launch Instances</strong> and wait for your Jumpbox to launch.</p>
<blockquote class="book-hint info">
  <p><strong>Note</strong></p>
<p>Be sure your instance has a Private IP of 10.0.0.5 and it has a Public DNS entry!</p>

</blockquote>

<h2 id="jumpbox-config">Jumpbox Config</h2>
<p>Now that we have a jumpbox we need to configure it!</p>
<p>Ensure your PEM file has the correct permissions (If on Linux and MacOS)</p>
<pre><code>chmod 600 bosh.pem
</code></pre><p>Transfer your PEM file to the Jumpbox</p>
<pre><code>scp -i ./bosh.pem ./bosh.pem ec2-user@&lt;IP ADDRESS&gt;:~
</code></pre><p>Log into your Jumpbox:</p>
<pre><code>ssh -i ./bosh.pem ec2-user@&lt;IP ADDRESS&gt;
</code></pre><p>Once on the server you’ll need to install some packages to make everything function properly.</p>
<pre><code>sudo yum install gcc gcc-c++ ruby ruby-devel mysql-devel postgresql-devel postgresql-libs sqlite-devel libxslt-devel libxml2-devel patch openssl git
</code></pre><h2 id="install-bosh-cli">Install BOSH CLI</h2>
<p>Download the latest version of the BOSH CLI</p>
<pre><code>curl -JL -o bosh https://github.com/cloudfoundry/bosh-cli/releases/download/v6.2.1/bosh-cli-6.2.1-linux-amd64
</code></pre><p>Make the bosh binary executable and move the binary to your PATH:</p>
<pre><code>chmod +x ./bosh
sudo mv ./bosh /usr/local/bin/bosh
</code></pre><p>You should now be able to use bosh. Verify by querying the CLI for its version:</p>
<pre><code>bosh -v
# version 5.3.1-8366c6fd-2018-09-25T18:25:51Z
# Succeeded
</code></pre></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">



  <div><a class="flex align-center" href="https://github.com/nicksterling/bosh-workshop/commit/364a63011aa3ac90ce9cd52e6f1793ce2ef81b41" title='Last modified by Nick Sterling | April 29, 2020' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>April 29, 2020</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/nicksterling/bosh-workshop/edit/master/exampleSite/content/docs/1_environment-setup.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#environment-setup">Environment Setup</a>
      <ul>
        <li><a href="#configure-aws">Configure AWS</a></li>
        <li><a href="#deploy-jumpbox">Deploy Jumpbox</a></li>
        <li><a href="#jumpbox-config">Jumpbox Config</a></li>
        <li><a href="#install-bosh-cli">Install BOSH CLI</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












